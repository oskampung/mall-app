(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods-list/goods-list"],{"5d45":function(t,e,o){"use strict";o.r(e);var r=o("f8b8"),n=o.n(r);for(var s in r)"default"!==s&&function(t){o.d(e,t,(function(){return r[t]}))}(s);e["default"]=n.a},"7d9d":function(t,e,o){},"8b51":function(t,e,o){"use strict";o.r(e);var r=o("e6ad"),n=o("5d45");for(var s in n)"default"!==s&&function(t){o.d(e,t,(function(){return n[t]}))}(s);o("ae6c");var i,a=o("f0c5"),d=Object(a["a"])(n["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);e["default"]=d.exports},ae6c:function(t,e,o){"use strict";var r=o("7d9d"),n=o.n(r);n.a},e6ad:function(t,e,o){"use strict";var r,n=function(){var t=this,e=t.$createElement;t._self._c},s=[];o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return r}))},e6f4:function(t,e,o){"use strict";(function(t){o("1822");r(o("66fd"));var e=r(o("8b51"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},f8b8:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o("116b");o("4a45");function n(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=s(t))){var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n,i=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){a=!0,n=t},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw n}}}}function s(t,e){if(t){if("string"===typeof t)return i(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}var a={data:function(){return{page:{total:0,current:1,size:10,pages:0,descs:"sales_num",ascs:"",orders:[]},categoryId:0,goodsList:[],loadingText:"正在加载...",headerTop:"0px",headerPosition:"fixed",orderbyList:[{text:"销量",selected:!0,orderbyicon:!1,orderby:"sales_num"},{text:"价格",selected:!1,orderbyicon:["sheng","jiang"],orderby:"price"},{text:"好评",selected:!1,orderbyicon:!1,orderby:"sort"}],orderby:"sheng"}},onLoad:function(e){this.categoryId=e.cid,t.setNavigationBarTitle({title:e.name}),this.goodsList=[],this.loadGoodsList(this.categoryId)},onPageScroll:function(t){t.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},onPullDownRefresh:function(){var e=this;setTimeout((function(){e.reload(),t.stopPullDownRefresh()}),1e3)},onReachBottom:function(){t.showToast({icon:"none",title:"获取更多商品"});var e=this.goodsList.length;if(this.page.current>=this.page.pages||e>=40)return this.loadingText="我是有底线的哦",!1;this.loadingText="正在加载...",this.page.current+=1,this.loadGoodsList(this.categoryId)},methods:{loadGoodsList:function(e){var o=this,s={categoryId:e,current:this.page.current,size:this.page.size};Object.assign(s,this.page),(0,r.getGoodsList)(s).then((function(e){if(console.log(e),0==e.data.code&&null!=e.data.data&&(o.page.currentPage=e.data.data.current,o.page.pages=e.data.data.pages,e.data.data.records.length>0)){var r,s=e.data.data.records,i=n(s);try{for(i.s();!(r=i.n()).done;){var a=r.value;a["imgs"]=a.coverImgs,o.goodsList.push(a)}}catch(d){i.e(d)}finally{i.f()}}1==o.goodsList.length&&o.toGoods(o.goodsList[0]),0==o.goodsList.length&&t.showToast({title:"暂无该分类产品",mask:!0,duration:2e4,success:function(){setTimeout((function(){t.navigateBack()}),2e3)}})})),this.loadingText=""},reload:function(){this.goodsList=[],this.page.current=1,this.loadGoodsList()},toGoods:function(e){t.navigateTo({url:"../goods?gid="+e.goodsId})},select:function(e){var o=this.orderbyList[e].text+"排序 ";if(this.orderbyList[e].orderbyicon){var r="sheng"==this.orderbyList[e].orderbyicon?"升序":"降序";this.orderbyList[e].selected&&(r="jiang"==this.orderbyList[e].orderbyicon?"降序":"升序",this.orderbyList[e].orderby=0==this.orderbyList[e].orderby?1:0),o+=r}this.orderbyList[e].selected=!0;for(var n=this.orderbyList.length,s=0;s<n;s++)s!=e&&(this.orderbyList[s].selected=!1);t.showToast({title:o,icon:"none"}),console.log(this.orderbyList[e]),this.page.descs=this.orderbyList[e].orderby,0==this.orderbyList[e].orderby?(this.page.descs=null,this.page.ascs="price"):1==this.orderbyList[e].orderby&&(this.page.descs="price",this.page.ascs=null),this.goodsList=[],this.page.current=1,this.loadGoodsList(this.categoryId)}}};e.default=a}).call(this,o("543d")["default"])}},[["e6f4","common/runtime","common/vendor"]]]);