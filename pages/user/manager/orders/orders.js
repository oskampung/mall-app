(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/manager/orders/orders"],{"109e":function(t,e,n){"use strict";n.r(e);var o=n("6d76"),a=n("7968");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("f6b5");var r,s=n("f0c5"),d=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=d.exports},"54c5":function(t,e,n){"use strict";(function(t){n("1822");o(n("66fd"));var e=o(n("109e"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"6d76":function(t,e,n){"use strict";var o={"uni-collapse":function(){return n.e("components/uni-collapse/uni-collapse").then(n.bind(null,"8202"))},"uni-collapse-item":function(){return n.e("components/uni-collapse-item/uni-collapse-item").then(n.bind(null,"cf28"))},"uni-steps":function(){return n.e("components/uni-steps/uni-steps").then(n.bind(null,"92e3"))}},a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))},7968:function(t,e,n){"use strict";n.r(e);var o=n("d938"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},d483:function(t,e,n){},d938:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;n("4a45");var o=n("0bc1"),a=(n("116b"),function(){n.e("components/uni-collapse/uni-collapse").then(function(){return resolve(n("8202"))}.bind(null,n)).catch(n.oe)}),i=function(){n.e("components/uni-collapse-item/uni-collapse-item").then(function(){return resolve(n("cf28"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/uni-steps/uni-steps").then(function(){return resolve(n("92e3"))}.bind(null,n)).catch(n.oe)},s={components:{uniCollapse:a,uniCollapseItem:i,uniSteps:r},data:function(){return{page:{total:0,current:1,size:100,pages:1,descs:"create_time",orders:[]},userId:"",headerPosition:"fixed",headerTop:"0px",typeText:{UNPAID:"等待付款",BACK:"等待商家发货",UNRECEIVED:"商家已发货",RECEIVED:"等待用户评价",COMPLETED:"交易已完成",REFUNDS:"商品退货处理中",CANCELLED:"订单已取消"},orderType:["全部","未付款","待发货","待收货","待评价","已完成","退款","已取消"],typeList:["","UNPAID","BACK","UNRECEIVED","RECEIVED","COMPLETED","REFUNDS","CANCELLED"],orderList:[[],[],[],[],[]],list:[],tabbarIndex:null,tabIndex:0,scrollInto:"",showTips:!1,navigateFlag:!1,pulling:!1,tabBars:[{name:"全部",id:null},{name:"待付款",id:"UNPAID"},{name:"待发货",id:"BACK"},{name:"待收货",id:"UNRECEIVED"},{name:"待评价",id:"RECEIVED"},{name:"已完成",id:"COMPLETED"},{name:"退货",id:"REFUNDS"},{name:"已取消",id:"CANCELLED"}],active:0,orderSteps:[{title:"已下单",desc:"2018-11-11"},{title:"已完成",desc:"2018-11-14"}],likeList:[],likeMarginTop:"1px"}},onLoad:function(e){this.userId=t.getStorageSync("userId");var n=e.tbIndex;this.tabbarIndex=null==n?null:n},onShow:function(){this.loadOrderList(this.tabbarIndex);for(var t=0;t<this.tabBars.length;t++)if(this.tabBars[t].id==this.tabbarIndex)return this.switchTab(t),!1},onPageScroll:function(t){},methods:{loadOrderList:function(e){var n=this,a={userId:null,status:""==e?null:e,delFlag:0};t.showLoading({title:"正在获取订单..."}),Object.assign(a,this.page),(0,o.getOrdersList)(a).then((function(e){0==e.data.code&&e.data.data.records.length>0?(n.page.current<=1&&(n.list=[]),n.list=e.data.data.records):0==e.data.code&&0==e.data.data.records.length&&(n.list=[]),t.hideLoading()}))},showLogistics:function(t){},gotoComments:function(e){t.navigateTo({url:"./comments?goodsId="+e.goods_id+"&spec="+e.spec+"&orderId="+e.id})},togoOrderSteps:function(t){console.log(t)},remindDeliver:function(e,n){var a=this,i={payOrderId:n.ordersn,type:e};(0,o.dealOrder)(i,n.id).then((function(e){setTimeout((function(){t.showToast({title:null!=e.data.msg?e.data.msg:"处理成功",icon:0==e.data.code?"success":"none"})}),300),0==e.data.code&&a.loadOrderList(a.tabbarIndex)}))},cancelOrder:function(e){var n=this;t.showModal({title:"取消订单",content:"确定取消此订单？",success:function(t){t.confirm?n.doCancelOrder(e):t.cancel}})},doComments:function(t){},doCancelOrder:function(e){for(var n=this.orderList.length,a=0;a<n;a++){var i=this.orderList[a],r=i.length;if(r>0&&"unpaid"==i[0].type)for(var s=0;s<r;s++)if(this.orderList[a][s].ordersn==e.ordersn){this.orderList[a][s].type="cancelled";break}}var d={id:e.id,delFlag:"1"};(0,o.updateOrder)(d).then((function(n){0==n.data.code&&null!=n.data.data&&(setTimeout((function(){t.showToast({title:"取消成功",icon:"none"})}),300),t.hideLoading()),document.getElementById(e.id).remove()}))},toPayment:function(e){t.showLoading({title:"正在获取订单..."});var n=[];n.push(e),setTimeout((function(){t.setStorage({key:"paymentOrder",data:n,success:function(){t.hideLoading(),t.navigateTo({url:"../../pay/payment/payment?amount="+e.payment+"&goodsId="+e.goods_id+"&orderName="+e.name+"&orderId="+e.id})}})}),500)},ontabtap:function(t){var e=t.target.dataset.current||t.currentTarget.dataset.current;this.switchTab(e),this.tabbarIndex=t.currentTarget.id,this.loadOrderList(this.tabbarIndex)},switchTab:function(t){this.tabIndex!==t&&(this.tabIndex=t,this.scrollInto=this.tabBars[t].id)},toGoodsPage:function(e){t.navigateTo({url:"../../goods/goods?gid="+e})},toOrderPage:function(e){t.navigateTo({url:"/pages/user/order_list/order_detail?u=1&oid="+e})}}};e.default=s}).call(this,n("543d")["default"])},f6b5:function(t,e,n){"use strict";var o=n("d483"),a=n.n(o);a.a}},[["54c5","common/runtime","common/vendor"]]]);